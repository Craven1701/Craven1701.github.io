I"?<p><strong>声明</strong>：本文参考博客园[ssh_alitheia] MacOS下给pdf添加书签(目录)</p>
<h4 id="原文链接-httpswwwcnblogscomshanchuanp13457426html"><strong>原文链接</strong> ：<a href="https://www.cnblogs.com/shanchuan/p/13457426.html">https://www.cnblogs.com/shanchuan/p/13457426.html</a></h4>

<p>因为淘宝买的很多扫描版电子书都没有标签，放在marginNote里看翻页的时候真的很窒息，没想到有个这么好用的命令行工具，啊我只能说命令行工具永远的神。</p>

<h3 id="1安装coherent-pdf-command-line-tools">1.安装<a href="http://community.coherentpdf.com/">Coherent PDF Command Line Tools</a></h3>
<p>在其首页就有“Download binaries now for Windows, Mac, or Linux”字样，下载压缩包解压用里面的二进制文件就行。macOS环境下用的是<code class="language-plaintext highlighter-rouge">/cpdf-binaries-master/OSX-Intel/cpdf</code>这个文件。一如既往的苹果又会拦截一下,要手动允许执行。</p>

<p><code class="language-plaintext highlighter-rouge">sudo spctl --master-disable</code> 这个命令可以一劳永逸的关掉MacOS的拦截- -  允许任何来源的应用运行。不过我还是没用。</p>

<p>2.导出原有书签</p>

<p>cpdf -list-bookmarks in.pdf &gt; bookmarks.txt
加上-utf8就可以导出中文书签</p>

<p>导出内容类似这样：</p>

<p>0 “contents” 2 “[2/Fit]”
 0 “part1 summary” 6 “[6/Fit]”
 1 “1.1 “ 8 “[8/Fit]”
第一列即层级，0代表顶层。第二列为目录类容。第三列为所在页码。第四列为格式，不写就是默认的。我发现中文似乎导不出来，不过可以导入。</p>

<p>3.编辑内容</p>

<p>根据自己的需求，随意增加即可。</p>

<p>4.导入书签</p>

<p>cpdf -add-bookmarks bookmarks.txt test.pdf -o test.pdf
我这里直接对原文件覆盖了，使用preview打开并不会导致冲突，执行完成后preview会自动刷新目录。</p>

<h3 id="2编辑自己的目录">2.编辑自己的目录</h3>
<h3 id="3格式化处理部分">3.格式化处理部分</h3>
:ET